<div class="py-4">
  <div *ngIf="!isLoadingRestaurantInfo" class="row row-cols-4 gy-2 gx-3">
    <!-- Image -->
    <div class="col-3" data-cy="restaurantImage" ngxViewer>
      <div class="col-12 mb-2">
        <img [src]="awsS3Url + '/' + restaurantDetail.imageCover[0]" class="rounded big-img" role="button"/>
      </div>

      <div class="row row-cols-3 g-2">
        <div *ngFor="let item of restaurantDetail.imageCover?.slice(1,4); index as i;" class="col">
          <img [src]="awsS3Url + '/' + item" class="rounded mini-img" role="button"/>
        </div>
      </div>

      <ng-container *ngIf="restaurantDetail.imageCover.length > 3">
        <img
          *ngFor="let item of restaurantDetail.imageCover?.slice(4, restaurantDetail.imageCover.length)"
          [src]="awsS3Url + '/' + item"
          class="rounded mini-img"
          role="button"
          [hidden]="true"
        />
      </ng-container>
    </div>

    <!-- Information -->
    <div class="col-4" data-cy="information">
      <div class="mb-3">
        <h3 class="mb-1">{{restaurantDetail.restaurantName}}</h3>
        <div class="d-flex flex-wrap row ps-2 gy-2 mb-2">
          <span class="col-auto rounded-pill px-2 bg-light-yellow text-dark border-yellow me-1">
            {{restaurantDetail.minPriceRate}}-{{restaurantDetail.maxPriceRate}} ฿
          </span>

          <ng-container *ngIf="restaurantDetail.categoryList">
            <span
              *ngFor="let item of restaurantDetail.categoryList"
              class="rounded-pill px-2 bg-white border-grey me-1 col-auto"
            >
              {{ getCategoryLable(item) }}
            </span>
          </ng-container>
        </div>
      </div>
      <div class="d-flex">
        <div class="col-auto me-5">
          <div class="d-flex align-items-center mb-2">
            <i class="bi bi-clock me-2"></i>
            <span class="mb-0">เวลาทำการ : {{restaurantDetail.startTime}} - {{restaurantDetail.endTime}} น.</span>
          </div>

          <div class="row row-cols-2">
            <div class="col d-flex align-items-center mb-2" *ngFor="let item of restaurantDetail.socialContactList">
              <i class="bi me-2" [ngClass]="getSocialContactIcon(item.SocialType)"></i>
              <span class="mb-0">{{ item.ContactValue }}</span>
            </div>
          </div>

          <ng-container *ngIf="restaurantDetail.paymentMethodList">
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-cash-coin me-2"></i>
              <span
                *ngFor="let item of restaurantDetail.paymentMethodList; index as i;"
                class="rounded-pill px-2 bg-white border-grey me-1"
              >
                {{ getPaymentMethodLabel(item) }}
              </span>
            </div>
          </ng-container>
        </div>
      </div>

      <div class="d-flex my-2">
        <i class="bi bi-geo-alt-fill me-2"></i>
        <div>
          <p class="mb-1">ห่าง {{ restaurantDetail.distance | shortNumber }}m</p>
          <p class="mb-1">{{ restaurantDetail.address }}</p>
        </div>
      </div>

      <ng-container *ngIf="restaurantDetail.description">
        <div class="d-flex align-items-center my-2">
          <i class="bi bi-emoji-smile me-2"></i>
          <span class="rounded-pill px-2 bg-white">
            {{ restaurantDetail.description }}
          </span>
        </div>
      </ng-container>
    </div>

    <!-- Dine in / Delivery -->
    <ng-container *ngIf="restaurantDetail.deliveryTypeList">
      <div class="col-2 text-center">
        <div *ngIf="restaurantDetail.deliveryTypeList.includes(deliveryType.PickUp)">
          <img src="../../../assets/image/restaurant_pin.png" class="w-50">
          <p class="mb-2">นั่งรับประทานที่ร้าน</p>
        </div>
        <div *ngIf="restaurantDetail.deliveryTypeList.includes(deliveryType.Delivery)">
          <img src="../../../assets/image/motorbike.png" class="w-50">
          <p class="mt-2">มีบริการจัดส่ง</p>
        </div>
      </div>
    </ng-container>

    <!-- Rating -->
    <div class="col-3">
      <div class="card border-0 rounded-2 mb-2">
        <div class="card-body">
          <h3 class="fw-bold mb-2">Rating</h3>

          <div class="d-flex align-items-center mb-2" data-cy="rating">
            <div class="col-auto me-3">
              <h3 class="mb-0">{{restaurantDetail.rating}}</h3>
            </div>
            <div class="col-auto d-flex">
              <ngb-rating [rate]="restaurantDetail.rating" [max]="5" id="rating" data-cy="star" [readonly]="true">
                <ng-template let-fill="fill" let-index="index">
                  <i class="bi-star{{fill === 100 ? '-fill' : ''}} star-color"></i>
                </ng-template>
              </ngb-rating>
            </div>
          </div>

          <div class="d-flex align-items-center mb-2">
            <i class="bi bi-person-fill"></i>
            <span class="card-text mx-2 mb-0">ทั้งหมด {{restaurantDetail.totalReview}} รีวิว</span>
          </div>

          <ng-container *ngIf="restaurantDetail.foodRecommendList">
            <p class="mb-1">เมนูที่ได้รับการแนะนำ</p>
            <div class="d-flex flex-wrap">
              <span
                class="rounded-pill bg-light-grey me-2 mb-2 px-2"
                *ngFor="let item of restaurantDetail.foodRecommendList" data-cy="recommendMenu"
              >
                {{item}}
              </span>
            </div>
          </ng-container>
        </div>
      </div>

      <div>
        <button *ngIf="restaurantDetail.isReview" type="button" class="btn btn-light-grey px-2 me-2"
          (click)="seeExistReviewRestaurant(restaurantDetail.restaurantId, restaurantDetail.restaurantName)"
        >
          <i class="bi bi-eye-fill me-2"></i>รีวิวของฉัน
        </button>

        <button type="button" class="btn btn-yellow"
          [ngClass]="restaurantDetail.isReview ? 'btn-yellow':'btn-light-yellow'"
          (click)="restaurantDetail.isReview? editReviewRestaurant(restaurantDetail.restaurantId, restaurantDetail.restaurantName) : addReviewRestaurant(restaurantDetail.restaurantId, restaurantDetail.restaurantName)"
        >
          <i class="bi fs-6 me-1" [ngClass]="restaurantDetail.isReview ? 'bi-pencil-square':'bi-plus-lg'"></i>
          {{ restaurantDetail.isReview ? 'แก้ไขรีวิว':'รีวิวร้านนี้' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Reviews -->
  <h4 class="mb-1 mt-3 fw-bolder">Reviews</h4>
  <div class="row g-2 mb-3" data-cy="reviewFilter">
    <div class="col">
      <label>Search</label>
      <input class="form-control form-control-sm shadow-none" type="text" placeholder="เมนูแนะนำ, ความคิดเห็น"/>
    </div>
    <div class="col-2">
      <label>จำนวนดาว</label>
      <select class="form-select form-select-sm shadow-none">
        <option>ทั้งหมด</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>
    <div class="col-auto d-flex align-content-end flex-wrap">
      <button class="btn btn-sm btn-light-yellow border-warning rounded-0 rounded-start">ทั้งหมด</button>
      <button class="btn btn-sm btn-light-yellow border-warning rounded-0">มีรูปภาพ</button>
      <button class="btn btn-sm btn-light-yellow border-warning rounded-0">มีความคิดเห็น</button>
      <button class="btn btn-sm btn-light-yellow border-warning rounded-0 rounded-end">มีเมนูแนะนำ</button>
    </div>
  </div>

  <div class="row row-cols-3 g-2">
    <!-- <div *ngFor="let item of Reviews; index as i;" class="col" data-cy="reviews">
      <div class="rounded-2 bg-white p-2">
        <div class="row px-2">
          <div class="col-2 px-1">
            <img src="..\assets\image\bear.png" class="w-100">
          </div>
          <div class="col">
            <div class="d-flex justify-content-between">
              <p class="m-0 mb-1">B**r</p>
              <p class="m-0">30 นาทีที่แล้ว</p>
            </div>
            <div class="col-auto d-flex align-items-center mb-2">
              <div class="col-auto me-1" *ngFor="let item of Info.Stars; index as i;">
                <img src="../../../assets/image/{{item}}.png" class="review-star-cover">
              </div>
              <p class="m-0 mt-1 ms-2">3.5</p>
            </div>
            <p class="text-break">อาหารอร่อย ร้านสะอาด ราคาถูกไม่แพง แต่รอนานไปนิส </p>
          </div>
        </div>
      </div>
    </div>
  </div> -->
</div>

<!-- Modal -->
<app-modal-review #modalReviewComponent></app-modal-review>
